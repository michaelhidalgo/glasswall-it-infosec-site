<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.72">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Glasswall Infosec and IT Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Glasswall Infosec and IT Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-165717322-1"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-165717322-1",{})</script>
<link rel="search" type="application/opensearchdescription+xml" title="Glasswall Infosec and IT" href="/opensearch.xml"><title data-react-helmet="true">Rebuild API - Under the Hood | Glasswall Infosec and IT</title><meta data-react-helmet="true" property="og:url" content="http://it-infosec.glasswallsolutions.com//docs/how-tos/file-rebuild-how-it-works"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Rebuild API - Under the Hood | Glasswall Infosec and IT"><meta data-react-helmet="true" name="description" content="Background"><meta data-react-helmet="true" property="og:description" content="Background"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="http://it-infosec.glasswallsolutions.com//docs/how-tos/file-rebuild-how-it-works"><link data-react-helmet="true" rel="alternate" href="http://it-infosec.glasswallsolutions.com//docs/how-tos/file-rebuild-how-it-works" hreflang="en"><link data-react-helmet="true" rel="alternate" href="http://it-infosec.glasswallsolutions.com//docs/how-tos/file-rebuild-how-it-works" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.67ec7a30.css">
<link rel="preload" href="/assets/js/styles.fba92c75.js" as="script">
<link rel="preload" href="/assets/js/runtime~main.37b32558.js" as="script">
<link rel="preload" href="/assets/js/main.abbcd49d.js" as="script">
<link rel="preload" href="/assets/js/1.ae6a9d45.js" as="script">
<link rel="preload" href="/assets/js/2.f9f7306e.js" as="script">
<link rel="preload" href="/assets/js/60.196879a0.js" as="script">
<link rel="preload" href="/assets/js/63.1105d12b.js" as="script">
<link rel="preload" href="/assets/js/935f2afb.6c39c2eb.js" as="script">
<link rel="preload" href="/assets/js/17896441.c2046022.js" as="script">
<link rel="preload" href="/assets/js/aa3927f0.5d8853ec.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/glasswall_logo_blue.png" alt="Glasswall Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/glasswall_logo_blue.png" alt="Glasswall Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Glasswall IT and Infosec</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/AboutUs/InfosecTeam/TheTeam">Documentation</a><a href="https://medium.com/glasswall-engineering/tagged/infosecit" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/filetrust" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_GrZ2"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/glasswall_logo_blue.png" alt="Glasswall Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/glasswall_logo_blue.png" alt="Glasswall Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Glasswall IT and Infosec</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/AboutUs/InfosecTeam/TheTeam">Documentation</a></li><li class="menu__list-item"><a href="https://medium.com/glasswall-engineering/tagged/infosecit" target="_blank" rel="noopener noreferrer" class="menu__link">Blog</a></li><li class="menu__list-item"><a href="https://github.com/filetrust" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper main-docs-wrapper"><div class="docPage_31aa"><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">Rebuild API - Under the Hood</h1></header><div class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="background"></a>Background<a class="hash-link" href="#background" title="Direct link to heading">#</a></h2><p>The Rebuild API leverages serverless functions to provide the battle hardened capablities of the Rebuild SDK at scale, available through HTTP API calls. With a range of consumption options available from pay-per-request to private cloud deployments, all the code is open sourced in <a href="https://github.com/filetrust" target="_blank" rel="noopener noreferrer">GitHub</a>. The first generation of code is focused on providing the capability using AWS components with Azure components surfacing shortly after first launch.</p><p>For our hosted solution we will assemble the components that give us the best levels of performance and resillience which could mean we are operating within multiple cloud providers. For managed and self deployed solutions then it really becomes a pick and choose for which is your cloud provider of choice, the aim here being that Glasswall&#x27;s engineering team provide the components that fit all the major cloud providers that suit as many use cases as possible.</p><p>Glasswall&#x27;s Rebuild SDK can process a file in-memory with no need to write the file, this means that for most of the resources we offer the file never leaves the serverless function other than the response to the request.</p><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</h5></div><div class="admonition-content"><p>Before you integrate Rebuild into your solution, be aware that file in the HTTP body only supports files up to 6MB due to a limitation in the request payload to AWS Lambda. If your use case deals with larger files, please use the input URL based pathway which currently supports files up to 30MB</p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="solution-overview"></a>Solution Overview<a class="hash-link" href="#solution-overview" title="Direct link to heading">#</a></h2><p>The serverless functionality offered by the cloud providers have clear similarities but also differences that shape the functionality that we offer. </p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="aws"></a>AWS<a class="hash-link" href="#aws" title="Direct link to heading">#</a></h3><p>AWS Lambda provides multiple triggers but the one most appropriate for providing these API resources is the HTTP trigger. This gives a very clean usage pattern of file-in file-out where the body of the HTTP request is the binary of the file within a multipart/form-data content type. Where this usage patten ends is when we exceed the maximum HTTP payload for a Lambda function - currently 6MB. </p><p> <img alt="Figure1" src="/assets/images/Rebuild-File-Architecture-af0995865533cb68a0c6981f94d67741.png"></p><p>To bypass this limitation we have a second usage pattern which is to utilise pre-signed URL&#x27;s to give the Lambda function authorised access to larger files (at launch files up to 30mb). In this pattern the file is placed in one of AWS&#x27;s S3 buckets and a URL is generated that contains the authorisation required to access the file, this URL is then passed into the function which can then perform the required processing on the file. If (as is the case with Rebuild) the processing results in a new file, this file is placed in another S3 bucket which can be accessed via another signed URL.</p><p>The functionality is then accessed via API Gateway (in itself having a max request size of 10MB) which is secured via a Lambda Authoriser.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="azure"></a>Azure<a class="hash-link" href="#azure" title="Direct link to heading">#</a></h3><p>When it comes to Azure the patterns are the same, it is the platform limits that change. Swapping Lambda for an Azure Function we still have access to an HTTP trigger but where the limit was 6MB - it is now 100MB. This means that the direct HTTP file-in file-out pattern becomes much more usable.</p><p>For larger payloads again a route using a pre-signed approach is available with Azure Blob Storage which allows files over 100MB to be processed.</p></div></article><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#background" class="table-of-contents__link">Background</a></li><li><a href="#solution-overview" class="table-of-contents__link">Solution Overview</a><ul><li><a href="#aws" class="table-of-contents__link">AWS</a></li><li><a href="#azure" class="table-of-contents__link">Azure</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/products/rebuild-api/quickstart-rebuild">Getting Started</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/glasswall" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Social</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/filetrust" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li><li class="footer__item"><a href="https://twitter.com/glasswallglobal" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li><li class="footer__item"><a href="https://www.linkedin.com/company/glasswall-solutions-limited/" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 Glasswall Solutions Ltd. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/styles.fba92c75.js"></script>
<script src="/assets/js/runtime~main.37b32558.js"></script>
<script src="/assets/js/main.abbcd49d.js"></script>
<script src="/assets/js/1.ae6a9d45.js"></script>
<script src="/assets/js/2.f9f7306e.js"></script>
<script src="/assets/js/60.196879a0.js"></script>
<script src="/assets/js/63.1105d12b.js"></script>
<script src="/assets/js/935f2afb.6c39c2eb.js"></script>
<script src="/assets/js/17896441.c2046022.js"></script>
<script src="/assets/js/aa3927f0.5d8853ec.js"></script>
</body>
</html>